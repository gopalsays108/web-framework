<!DOCTYPE html>
<html lang="en" xmlns:mso="urn:schemas-microsoft-com:office:office"
  xmlns:msdt="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <script>
    function printImages(obj) {

      var table = document.getElementById("myTable");

      table.innerHTML = '';

      var row1 = table.insertRow(0);
      var cell1 = row1.insertCell(0);
      var cell2 = row1.insertCell(1);

      var row2 = table.insertRow(1);
      var cell3 = row2.insertCell(0);
      var cell4 = row2.insertCell(1);

      var row3 = table.insertRow(2);
      var cell5 = row3.insertCell(0);
      var cell6 = row3.insertCell(1);

      var row4 = table.insertRow(3);
      var cell7 = row4.insertCell(0);
      var cell8 = row4.insertCell(1);

      var row5 = table.insertRow(4);
      var cell9 = row5.insertCell(0);
      var cell10 = row5.insertCell(1);

      var row6 = table.insertRow(5);
      var cell11 = row6.insertCell(0);
      var cell12 = row6.insertCell(1);

      cell1.innerHTML = "Temperature";
      cell2.innerHTML = obj.main.temp + " K";
      cell3.innerHTML = "Humidity";
      cell4.innerHTML = obj.main.humidity + " %";
      cell5.innerHTML = "Feels Like";
      cell6.innerHTML = obj.main.feels_like + " K";
      cell7.innerHTML = "Pressure";
      cell8.innerHTML = obj.main.pressure + " psi";
      cell9.innerHTML = "Visibility";
      cell10.innerHTML = obj.visibility;
      cell11.innerHTML = "Clouds";
      cell12.innerHTML = obj.clouds.all;

    }

    function doAjax() {
      var txt = document.querySelector('#txt').value;
      const url = `https:\\api.openweathermap.org/data/2.5/weather?q=${txt}&appid=446420e2ff2358697bf34a6c0ac1362f`;
      console.log('Before Fetch');
      var promise = fetch(url);
      promise.then(response => {
        response.json().then(data => {
          console.log('JSON Rec ', data);
          printImages(data);

        }).catch(err => {
          console.log('Invalid JSON ', err);
        })
      }).catch(err => {
        console.log('Server Error ', err);
      })
      console.log('After Fetch ');
    }
  </script>
</head>

<body>
  <input id='txt' type="text" placeholder="Type to Search Image">
  <button onclick="doAjax()"> Search</button>
  <fieldset>
    <legend>Output</legend>
    <table id="myTable">
    </table>
  </fieldset>
</body>

</html>